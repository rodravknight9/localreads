@page "/myserver"
@inject IHttpRequest HttpRequest

<MudList T="UserResponse" Style="width:450px; max-width:450px;">
    @foreach (var user in Users)
    {
        <MudListItem>
            <AvatarContent>
                <MudAvatar Color="Color.Tertiary">V</MudAvatar>
            </AvatarContent>
            <ChildContent>
                <MudElement Class="d-flex justify-space-between flex-grow-1">
                    <MudElement Class="d-flex flex-column">
                        <MudText Typo="Typo.body2">@user.Name</MudText>
                        <MudText Typo="Typo.body2">@user.UserName</MudText>
                        <MudText Typo="Typo.body2">@user.Location</MudText>
                        <MudText Typo="Typo.body2">@user.FavoriteBooksCount books</MudText>
                    </MudElement>
                    <MudElement>
                        <MudText Typo="Typo.body2" Color="Color.Info">
                            Currently reading: @user.CurrentlyReading
                        </MudText>
                    </MudElement>
                </MudElement>
            </ChildContent>
        </MudListItem>
    }
</MudList>

@code {
    private List<UserResponse> Users = new List<UserResponse>();
    protected override async Task OnInitializedAsync()
    {
        Users = (await HttpRequest.Get<List<UserResponse>>($"/users")).Content;
    }
}
